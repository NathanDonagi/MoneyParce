{% extends 'base.html' %}
{% block content %}
<header class="masthead bg-index text-white text-center py-4">
  <div class="container d-flex align-items-center flex-column pt-2">
    <h2>Pmilf</h2>
    <p>Insert Text Here</p>
  </div>
</header>
<div class="p-3">
  <div class="container">
    <div class="row mt-3">
      <div class="col mx-auto text-center mb-3">

          <div>
<form id="gemini-form">
    {% csrf_token %}
    <textarea name="prompt" placeholder="Ask me anything..."></textarea>
    <button type="submit">Ask</button>
</form>
<div id="response"></div>

<script>
document.getElementById('gemini-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);

    try {
        const response = await fetch('/ask/', {
            method: 'POST',
            body: formData
        });
        const data = await response.json();
        document.getElementById('response').innerText = data.response || data.error;
    } catch (error) {
        console.error('Error:', error);
    }
});
</script>
          </div>

      </div>
    </div>
  </div>
</div>
{% endblock content %}
